---Title: How to clone the GT Book---#How to clone the GT Book- [[howto]] [[lepiter]] [[gtbook]]- See [[* Add the storeString for GraphQL (and other) snippets]] and [[How to programatically create and populate lepiter databases]]- #Unknown Snippet issue    - [[issue]] [#3158](https://github.com/feenkcom/gtoolkit/issues/3158) feenkcom/gtoolkit#3158    - The problem is that the GT Book page {{gtPage:GemStone session registry and manager UI|db=2j9m7db2i4oz116bexd7wbdxo}} contains unknown snippets that must be loaded from another repo. If you try to write this page to disk (eg on a change, or loading a clone into a new database) then the write will fail, as the {{gtClass:name=NeoJSONWriter}} doesn't know what to output.    - We exclude that page for now.- #How to clone the GT book    - We create a folder, register it as a lepiter db, walk through the book, clone each page, and add it to the new db. Finally we add the ToC.    - testDbDir := FileLocator imageDirectory / 'lepiterTest'.testDbDir ensureCreateDirectory.LeDatabasesRegistry defaultLogicalDatabase properties	addRegisteredDirectory: testDbDir.LeDatabasesRegistry defaultLogicalDatabase reload.testDb := LeDatabasesRegistry defaultLogicalDatabase databases		detect: [ :db | db monitor localRoot = testDbDir ].safePages := LeStorageExamples new gtBook pages		reject: [ :p | p title = 'GemStone session registry and manager UI' ].safePages	do: [ :page | testDb addPage: (Smalltalk compiler evaluate: page storeString) ].toc := testDb pageNamed: 'Glamorous Toolkit Book'.testDb tableOfContentsPageID: toc uid.testDb.    - Test if each page generated from the storeString has the same storeString representation.    - safePages := LeStorageExamples new gtBook pages		reject: [ :p | p title = 'GemStone session registry and manager UI' ].safePages	do: [ :page | 		page			assert: page storeString			equals: (Smalltalk compiler evaluate: page storeString) storeString ].    - Can we collect another representation, such as HTMLDocument?    - LeStorageExamples new gtBook pages collect: #asHTMLContent- #Debugging the LeUnknownSnippet JSON writer.    - We get an error in {{gtClass:name=NeoJSONWriter}} that in  {{gtMethod:name=NeoJSONMapper>>#mappingFor:ifAbsent:}}  no mapping is found for {{gtClass:name=LeUnknownSnippet}} . So we have to add it?    - LeJsonV4 new newWriter.    - #leJsonV4Name gtImplementors contents	select: [ :m | LeSnippet class allSubclasses includes: m methodClass ].    - It is not enough to implement  `#leJsonV4Name` in {{gtClass:name=LeUnknownSnippet class}}.  Apparently unknown snippets are special ...