---Title: *How to translate YAML to JSON with yq---#*How to translate YAML to JSON with yq- [[howto]]- See the [yq home page](https://mikefarah.gitbook.io/yq/).- See also [jq](https://stedolan.github.io/jq/).- #Generate JSON with yq    - Use {{gtClass:name=GtSubprocessWithInMemoryOutput}} to run the external command.    - FileLocator imageDirectory / 'gtoolkit.yaml'    - process := GtSubprocessWithInMemoryOutput		command: 'yq'		arguments: {'-o=json'.				'gtoolkit.yaml'}.process errorBlock: [ :theProc | self error: 'External process failed, see proc' ].process runAndWait.process stdout    - There are several JSON parsers.    - STON fromString: process stdout.    - JSONParser parse: process stdout.    - NeoJSONReader fromString: process stdout.    - See the [NeoJSON home page](https://book.huihoo.com/smalltalk/pharo/enterprise-pharo/book-result/NeoJSON/NeoJSON.html) and the [NeoJSON repo](https://github.com/svenvc/NeoJSON).    - They give different errors.    - [STON fromString: ']'] onErrorDo: [:err | err ].    - [JSONParser parse: ']'] onErrorDo: [:err | err ].    - [NeoJSONReader fromString: ']'] onErrorDo: [:err | err ].- #Testing on the YAML test suite    - Clone the [YAML test suite](https://github.com/yaml/yaml-test-suite).    - | repo targetFolder proc |repo := 'https://github.com/yaml/yaml-test-suite.git'.targetFolder := FileLocator imageDirectory/ 'yamlTests'.targetFolder ensureCreateDirectory.proc := GtSubprocessWithInMemoryOutput new		workingDirectory: targetFolder;		command: 'git';		arguments: {'clone'.				repo};		errorBlock: [ :theProc | self error: 'Git clone failed: ' , repo printString ].proc runAndWait.targetFolder.    - See which tests pass the parser.    - (FileLocator imageDirectory / 'yamlTests' / 'yaml-test-suite' / 'src'	childrenMatching: '*.yaml')	collect: [ :each | 		| proc |		proc := GtSubprocessWithInMemoryOutput				command: 'yq'				arguments: {'-o=json'.						'gtoolkit.yaml'}.		proc			errorBlock: [ :theProc | self error: 'External process failed, see proc' ].		proc runAndWait.		[ STON fromString: proc stdout.		'ok' ] onErrorDo: [ :err | each -> err ] ].- #Testing on the GitHub action test cases    - (FileLocator imageDirectory parent / 'yamlFiles' childrenMatching: '*.y*ml')	collect: [ :each | 		| proc |		proc := GtSubprocessWithInMemoryOutput				command: 'yq'				arguments: {'-o=json'.						'gtoolkit.yaml'}.		proc			errorBlock: [ :theProc | self error: 'External process failed, see proc' ].		proc runAndWait.		[ STON fromString: proc stdout.		'ok' ] onErrorDo: [ :err | each -> err ] ].