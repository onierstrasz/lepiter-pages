---Title: Count occurrences of words in a text---#Count occurrences of words in a text- [[exercise]]- #The problem    - From a [Pharo Discord #general post](https://discord.com/channels/223421264751099906/223421264751099906/1044381590534508604).    - Todd Blanchard: I think I've found a really pathological inefficiency just mucking about with a toy problem.  I was reading this article [https://chreke.com/little-languages.html](https://chreke.com/little-languages.html ) which references Alan Kay and discusses the need for small languages and the toy problem put forth is to count the occurrences of each word in a piece of text.  So I thought, I'll bet that's a one liner in Smalltalk.    - Where a word was defined as a string of letters.  So I coded this up:    - Bag	withAll: ('one, two, three, and four, one, five, one '			findTokens: (CharacterSet newFrom: Character alphabet , Character alphabet asUppercase)					complement)    - And it takes several minutes to run!    - My presumption was that findTokens: would make use of #includes: so a CharacterSet is likely as good as a String and a CharacterSetComplement is just a negated CharacterSet so that's what I used.
Anyhoo, I got tired of waiting so I interrupted the program and it ended up in {{gtMethod:name=String>>findDelimiters:startingAt:|expanded}} which, rather than calling #includes: actually iterates the delimiters and this takes forever.    - And iterating all the characters that are not A-Za-z takes a very long time.
skipDelimiters: delimiters startingAt: start has a similar problem.  Changing it to    - ```
start to: self size do: [ :i | 
        (delimiters includes: (self at: i)) 
            ifFalse: [ ^ i ] ].
    ^ self size + 1
```    - resulted in a very quick execution time.  So I'm wondering if there is something I'm not seeing or if I should submit a fix to P11.- #The fix    - The problem however appears to be here:        - (CharacterSet newFrom: Character alphabet , Character alphabet asUppercase) complement    - Isn't there a much easier way?    - ('One, two, three, and four, one, five, one ' substrings	collect: [ :each | each onlyLetters asLowercase ]) asBag sortedCounts